@use "sass:map";
@use "../common";
@use "../icons";

@mixin root {
  display: contents;

  .container {
    display: contents;

    .currentGovernment {
      display: contents;

      padding: 0 !important;

      @include common.icon-before(map.get(icons.$icons, "leaderMake"), 1, 12, 14);
    }
  }

  // Name <span>, Trait (Bonus) [rank 12]
  .currentLeader:nth-child(1) {
    @include common.debug-marker(1);

    position: relative;

    display: grid;

    grid-row: 12 / 14;
    grid-column: 2 / 10;

    max-width: 40vmin;

    margin-bottom: 0 !important;

    font-size: calc(var(--font-size-base) * 0.5);

    color: var(--color-primary);

    // "Leader:" label
    >span:first-child {
      display: none;
    }

    // Name of the leader kitten.
    >span.name {
      grid-row: 1;

      padding: 0 !important;

      font-size: var(--font-size-base);

      color: var(--color-primary);
    }
  }

  // exp: 123.45K (12%)
  .currentLeader:nth-child(2) {
    @include common.debug-marker(1);

    grid-row: 11;
    grid-column: 2 / 5;

    margin: 0 !important;

    font-size: calc(var(--font-size-base) * 0.5);
  }

  // Job bonus: x1.2 (Job)
  .currentLeader:nth-child(3) {
    @include common.debug-marker(1);
    grid-row: 11;
    grid-column: 5 / 10;

    font-size: calc(var(--font-size-base) * 0.5);
  }

  // Promote Leader
  .currentLeader + a {
    @include common.debug-marker(1);

    z-index: 2;

    grid-row: 12;
    grid-column: 2 / 10;

    color: var(--color-text);
  }

  // Unassign Leader
  .currentLeader ~ a {
    @include common.debug-marker(1);

    z-index: 2;

    grid-row: 11;
    grid-column: 9 / 10;

    color: var(--color-text);

    @include common.icon-instead(map.get(icons.$icons, "leaderUnassign"));
  }

  .censusFilters {
    grid-row: 15;
    grid-column: 2 / 10;

    height: initial !important;

    line-height: 0;

    @include common.debug-marker(3);

    select {
      float: none !important;

      font-size: calc(var(--font-size-base) * 0.5);

      color: var(--color-text);
    }
  }

  // A kitten in the population.
  // Has 2 rows:
  //   1. Kitten information: Title/age/rank
  //   2. Interaction elements: Favorite/make leader
  .census-block {
    display: grid;

    grid-template-columns: subgrid;
    grid-column: 1 / 10;

    >div:first-child {
      display: contents !important;

      @include common.debug-marker(3);

      font-size: calc(var(--font-size-base) * 0.5);

      .info {
        @include common.debug-marker(3);

        grid-row: 1;
        grid-column: 2 / 10;

        font-size: calc(var(--font-size-base) * 0.5);

        color: var(--color-text-dim);

        .name {
          font-size: calc(var(--font-size-base) * 0.5);

          color: var(--color-text);
        }
      }

      .skill {
        @include common.debug-marker(3);

        grid-row: 2;
        grid-column: 2 / 10;

        font-size: calc(var(--font-size-base) * 0.4);
        font-weight: initial !important;

        color: var(--color-text);
      }

      br {
        display: none;
      }
    }

    .links-container {
      display: contents !important;

      span.btn.modern,
      a.unassignHref {
        display: grid !important;

        grid-row: 1 / 3;

        width: var(--font-size-base) !important;

        @include common.debug-marker(3);

        &.promoteHref {
          grid-column: 6 / 7;

          @include common.icon-instead(map.get(icons.$icons, "promote"));
        }

        &.favoriteHref {
          grid-column: 7 / 8;

          @include common.icon-instead(map.get(icons.$icons, "favorite"));
        }

        &.leaderHref {
          grid-column: 8 / 9;

          @include common.icon-instead(map.get(icons.$icons, "leaderMake"));
        }
      }

      .unassignHref {
        grid-column: 9 / 10;

        @include common.icon-instead(map.get(icons.$icons, "unassign"));
      }
    }

    &.simLeader {
      display: contents;

      >div:first-child {
        @include common.debug-marker(3);

        grid-row: 14;
        grid-column: 2 / 10;

        div.info {
          // #pragma ux_loss We no longer see the age of the leader kitten.
          display: none;

          .name {
            // We already have the name from the .currentLeader section.
            display: none;
          }
        }

        .skill {
          @include common.debug-marker(3);

          grid-row: 14;
        }
      }

      span.btn.modern,
      a.unassignHref {
        z-index: 2;

        grid-row: 12;

        @include common.debug-marker(3);
      }
    }
  }

  // Pagination
  .container > *:last-child {
    display: initial !important;

    grid-row: 15 / 16;
    grid-column: 2 / 10;

    width: initial !important;

    margin: 0 !important;

    font-size: calc(var(--font-size-base) * 0.5);

    color: var(--color-text);

    text-align: initial !important;

    @include common.debug-marker(3);

    .lastHref,
    .nextHref,
    .firstHref,
    .previousHref {
      float: none !important;

      font-size: calc(var(--font-size-base) * 0.5);

      color: var(--color-text);
    }
  }
}
