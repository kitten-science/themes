@use "sass:map";
@use "../common";
@use "../icons";

@mixin root {
  display: contents !important;

  * {
    @include common.debug-marker(2);
  }

  // Contents consists of two table columns, which need to be unwrapped.

  // Happiness/Festival Duration
  // Has only text content.
  td:first-child {
    grid-row: 1 / 2;
    grid-column: 2 / 10;

    width: initial !important;

    font-size: calc(var(--font-size-base) * 0.5);

    line-height: calc(var(--font-size-base) * 0.5);

    text-align: right !important;

    cursor: default !important;
    user-select: none;

    br + br {
      display: none;
    }
  }

  // Unwrap contents
  .container {
    display: contents !important;

    table {
      display: contents !important;

      tr {
        display: contents !important;

        // The first td is the 'Happiness/Festival Duration' section,
        // which does not need its contents unwrapped.
        td + td {
          display: contents !important;

          .btn.modern {
            display: contents !important;

            .btnContent {
              display: contents !important;
            }
          }
        }
      }
    }
  }

  // Hunt/Festival/Optimize Jobs/Promote Kittens/Present Box

  // Send hunters
  .btn.modern[aria-description~="hunters"] {
    .btnTitle {
      @include common.icon-instead(map.get(icons.$icons, "hunt"));

      grid-row: 5 / 6;
      grid-column: 1 / 2;

      cursor: pointer;
      user-select: none;
    }
  }

  // Hold Festival
  .btn.modern[aria-description~="festival"] {
    // x1
    .btnTitle {
      @include common.icon-instead(map.get(icons.$icons, "festival"));

      grid-row: 1 / 2;
      grid-column: 1 / 2;

      cursor: pointer;
      user-select: none;
    }

    // x10
    a[class=""] {
      @include common.icon(map.get(icons.$icons, "festival"));

      float: none !important;

      grid-row: 1 / 2;
      grid-column: 2 / 3;

      padding: 0 !important;

      color: var(--color-text);

      cursor: pointer;
      user-select: none;
    }

    // x100
    a.rightestLink {
      @include common.icon(map.get(icons.$icons, "festival"));

      float: none !important;

      grid-row: 1 / 2;
      grid-column: 3 / 4;

      padding: 0 !important;

      color: var(--color-text);

      cursor: pointer;
      user-select: none;
    }
  }

  // Manage Jobs (Optimize)
  .btn.modern[aria-description~="distribution"] {
    .btnTitle {
      @include common.icon-instead(map.get(icons.$icons, "jobOptimize"));

      z-index: 2;

      grid-row: 10 / 11;
      grid-column: 8 / 9;

      cursor: pointer;
      user-select: none;
    }
  }

  // Promote kittens
  .btn.modern[aria-description~="promotes"] {
    .btnTitle {
      @include common.icon-instead(map.get(icons.$icons, "promoteAll"));

      z-index: 2;

      grid-row: 10 / 11;
      grid-column: 9 / 10;

      cursor: pointer;
      user-select: none;
    }
  }

  // Unwrap present box
  .btn.modern[aria-description=""] {
    .btnTitle {
      @include common.icon-instead(map.get(icons.$icons, "presentBox"));
      position: absolute;
      z-index: 2;

      grid-row: 4;
      grid-column: 1 / 2;

      cursor: pointer;
      user-select: none;
    }
  }
}
